(function(){"use strict";var e={4476:function(e,t,r){var o=r(9242),n=r(3396);function a(e,t,r,o,a,l){const c=(0,n.up)("TraceGraph");return(0,n.wg)(),(0,n.j4)(c)}const l={id:"Graph"},c=(0,n.uE)('<h1>DeepTraLog</h1><div id="dropdown-container"><label for="select-option">Select Trace:</label><select id="select-option"></select><div class="dropdown-spacing" style="width:10px;"></div><label for="select-option-layout">Layout:</label><select id="select-option-layout"><option value="network">Network Layout</option><option value="trace" selected>Trace Layout</option></select></div>',2),s=[c];function i(e,t,r,o,a,c){return(0,n.wg)(),(0,n.iD)("div",l,s)}r(560);var p=r(4),d={data(){return{}},mounted(){let e={top:10,right:25,bottom:30,left:40},t=1400-e.left-e.right,r=650-e.top-e.bottom;const o=["single_graph2.json","id_service.csv","id_url+temp.csv","id_url+type.csv","all_graph_12.json"];let n=p.Ys("#Graph").append("svg").attr("width",t+e.left+e.right).attr("height",r+e.top+e.bottom),a=n.append("g").attr("class","zoom").attr("transform","translate("+e.left+","+e.top+")");const l=o.map((e=>e.endsWith(".json")?p.AVB(e):e.endsWith(".csv")?p.gyn(e):void 0));function c(e){let o=e[4].find((function(e){return"F01-01"===e.error_trace_type})),l=e[1],c=e[2],s=e[3],i=e[4];i.sort(h),console.log(e);for(let t=0;t<i.length;t++){let e=i[t].node_info,r=new Set;for(let t=0;t<e.length;t++){let o=e[t][1];r.add(l[o].Service)}let o=Array.from(r);o.sort();let n=o.join("\n");console.log(i[t].error_trace_type),console.log(n)}const d=["#fdeff2","#f6bfbc","#efab93","#f0908d","#f3f3f3","#c0a2c7","#e597b2","#e6cde3","#8d6449","#bf794e","#b79b5b","#e6b422","#6e7955","#888e7e","#00a381","#00a497","#478384","#5b7e91","#89c3eb","#84a2d4","#b8d200","#f8b862","#9d5b8b","#c4a3bf","#9fa0a0","#c0a2c7","#4d5aaf","#82ae46","#f8f4e6","#59b9c6","#74325c","#d2691e","#99ffff","#99ff33","#a5c9c1","#e29399"];let f=new Map,u=[];function y(e,o,l,c){a.selectAll("*").remove(),p.Ys("#Graph").selectAll(".legend-container").remove(),p.Ys("#Graph").selectAll(".button").remove();let s=e.nodes_score.match(/\d+\.\d+/g).map(Number),i=Math.min(...s),y=Math.max(...s),h=s.map((e=>(e-i)/(y-i)));h.forEach(((t,r)=>{e.node_info[r].push(t.toFixed(2))}));let v=e.edge_index.map(((t,r)=>({source:t[0],target:t[1],type:e.edge_attr[r]}))),m=[];const g=p.cJy(p.cjJ);let b=e.node_info.map(((e,t)=>{const r=o[e[1]].Service,n=d[e[1]],a=m.find((e=>e.ServiceName===r));return a||m.push({ServiceName:r,color:n}),{Temp:e[0],Service:e[1],ServiceName:o[e[1]].Service,q:e[2],w:e[3],e:e[4],Type:e[5],TempType:e[6],Id:t,color:d[e[1]],scoreColor:g(e[7]),Content:c[e[6]].Content,score:e[7],show:!0}}));u=[],u=u.concat(b.slice());let x=p.ohM().on("start",N).on("drag",O).on("end",$);function _({transform:e}){a.attr("transform",e)}n.call(p.sPX().scaleExtent([.2,6]).on("zoom",_));let w=p.Ys("#Graph").append("div").style("opacity",0).attr("class","tooltip").style("background-color","white").style("border","solid").style("border-width","2px").style("border-radius","5px").style("padding","5px"),k=p.A4v(b).force("link",p.Fsl(v).id((e=>e.Id))).force("charge_force",p.q5i().strength(-800)).force("center_force",p.wqt(t/2,r/2)).force("collide",p.Hh().radius(20).strength(.5)).force("y",p.Mrm());a.append("defs").append("marker").attr("id","arrowhead").attr("refX",21).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z");let Y=a.append("g").attr("class","links").selectAll("line").data(v).enter().append("line").attr("stroke-width",3).style("stroke",(e=>0===e.type?"black":1===e.type?"red":2===e.type?"green":void 0)).attr("marker-end","url(#arrowhead)"),j=a.append("g").attr("class","nodes").selectAll("circle").data(b).enter().append("circle").attr("r",15).attr("fill",(e=>e.score>.6?e.scoreColor:"#62B1D0")).style("stroke-width","2px").on("mouseover",G).on("mouseout",E).on("mousemove",M).on("click",(function(){const e=p.Ys(this).data()[0].Id,t=f.has(e);t?(f.delete(e),p.Ys(this).style("stroke","none")):(f.set(e,b[e]),p.Ys(this).style("stroke","red"))})).call(x),S=a.selectAll(".node-label").data(b).enter().append("text").attr("class","node-label").attr("class","unselectable").text((e=>e.TempType)).style("text-anchor","middle").style("dominant-baseline","middle").style("font-size","12px").style("pointer-events","none"),A=a.selectAll(".node-label").data(b).enter().append("text").attr("class","node-label").attr("class","unselectable").text("●").style("fill",(e=>e.color)).style("text-anchor","middle").style("dominant-baseline","middle").style("font-size","30px").style("pointer-events","none"),T=p.Ys("#Graph").append("div").attr("class","legend-container");T.selectAll(".legend").data(m).enter().append("button").attr("class","legend").style("color",(e=>e.color)).style("display","inline").style("top","20px").style("right","10px").on("click",(e=>{j.filter((t=>t.ServiceName===e.target.__data__.ServiceName)).style("opacity",0)})).html((e=>`<span class="legend-color">&#9632;</span> ${e.ServiceName}`));let C=new Map;function N(e,t){e.active||k.alphaTarget(.1).restart(),t.fx=t.x,t.fy=t.y}function O(e,t){t.fx=e.x,t.fy=e.y}function $(e,t){e.active||k.alphaTarget(0),t.fx=null,t.fy=null}function G(){w.style("opacity",1),p.Ys(this).style("opacity",1)}function E(){w.style("opacity",0).style("left",0).style("top",0),p.Ys(this).style("opacity",1)}function M(e,t){w.style("left",`${e.clientX+50}px`).style("top",e.clientY-19.5+"px").html(`Content :  ${t.Content.substring(0,300)} ; Anomaly Score : ${t.score}`)}"network"===p.Ys("#select-option-layout").property("value")?k.force("x",p.RUJ()):"trace"===p.Ys("#select-option-layout").property("value")&&b.forEach((e=>{const t=e.ServiceName;C.has(t)||C.set(t,50*C.size),e.x=C.get(t)})),v.forEach((e=>{b[e.source.Id].y>b[e.target.Id].y&&(b[e.target.Id].y=b[e.source.Id].y+50)})),k.on("tick",(()=>{j.attr("cx",(e=>e.x)).attr("cy",(e=>e.y)),Y.attr("x1",(e=>e.source.x)).attr("y1",(e=>e.source.y)).attr("x2",(e=>e.target.x)).attr("y2",(e=>e.target.y)),S.attr("x",(e=>e.x)).attr("y",(e=>e.y-20)),A.attr("x",(e=>e.x)).attr("y",(e=>e.y))}))}function h(e,t){const r=e.error_trace_type.toUpperCase(),o=t.error_trace_type.toUpperCase();return r<o?-1:r>o?1:0}function v(){var e=p.Ys(this).property("value");o=i.find((function(t){return t.error_trace_type===e})),y(o,l,c,s)}function m(){var e=p.Ys("#select-option").property("value");o=i.find((function(t){return t.error_trace_type===e})),y(o,l,c,s)}function g(){if(0===f.size){const e=u.map((e=>`${e.ServiceName} || ${e.Content} || ${e.score}`));console.log(e.join("\n"))}else{const e=Array.from(f.values()).map((e=>`${e.ServiceName} || ${e.Content} || ${e.score}`));console.log(e.join("\n"))}}y(o,l,c,s),p.Ys("#select-option").selectAll("option").data(i).enter().append("option").text((e=>e.error_trace_type)).property("value",(e=>e.error_trace_type)),p.Ys("#select-option").on("change",v),p.Ys("#select-option-layout").on("change",m),p.Ys("#Graph").append("button").text("Export").on("click",g)}Promise.all(l).then((e=>{c(e)})).catch((e=>console.error("Error loading files:",e)))},methods:{}},f=r(89);const u=(0,f.Z)(d,[["render",i]]);var y=u,h={name:"App",components:{TraceGraph:y}};const v=(0,f.Z)(h,[["render",a]]);var m=v;(0,o.ri)(m).mount("#app")}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,r),a.exports}r.m=e,function(){var e=[];r.O=function(t,o,n,a){if(!o){var l=1/0;for(p=0;p<e.length;p++){o=e[p][0],n=e[p][1],a=e[p][2];for(var c=!0,s=0;s<o.length;s++)(!1&a||l>=a)&&Object.keys(r.O).every((function(e){return r.O[e](o[s])}))?o.splice(s--,1):(c=!1,a<l&&(l=a));if(c){e.splice(p--,1);var i=n();void 0!==i&&(t=i)}}return t}a=a||0;for(var p=e.length;p>0&&e[p-1][2]>a;p--)e[p]=e[p-1];e[p]=[o,n,a]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,a,l=o[0],c=o[1],s=o[2],i=0;if(l.some((function(t){return 0!==e[t]}))){for(n in c)r.o(c,n)&&(r.m[n]=c[n]);if(s)var p=s(r)}for(t&&t(o);i<l.length;i++)a=l[i],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(p)},o=self["webpackChunkmy_vue_project"]=self["webpackChunkmy_vue_project"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=r.O(void 0,[998],(function(){return r(4476)}));o=r.O(o)})();
//# sourceMappingURL=app.0363b48f.js.map